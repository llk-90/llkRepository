<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>环境参数（折线图）</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<!--标准mui.css-->
		<link rel="stylesheet" href="css/mui.min.css">
		<!--App自定义的css-->
		<link rel="stylesheet" type="text/css" href="css/common.css" />
		<link rel="stylesheet" type="text/css" href="css/mui.picker.min.css" />
		<script src="js/mui.min.js"></script>
		<script src="libs/echarts-all.js"></script>
		<script src="js/mui.picker.min.js"></script>
	</head>

	<body style="background-color: #eeeeee;color: #595959;">
		<header class="mui-bar mui-bar-nav header-self" style="background-color: #a3d55f;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="color: #FFF;"></a>
			<h2 class="mui-title" style="color: #FFF;">环境参数</h2>
		</header>
		<div class="mui-content">
			<div style="padding: 10px;background-color: #FFF;padding-top: 10px;">
				<div style=" width:60px; height:60px; background-color:#a3d55f; border-radius:35px;float: left;margin-right: 10px;">
					<span style="height:60px; line-height:60px; display:block; color:#FFF; text-align:center">100</span>
				</div>
				<div style="height: 60px;padding-top: 7px;">
					<font size="4" style="padding: 5px;">葡萄棚一号</font>
					<font size="4" style="float: right;">2016/05/09</font>
					<p class='mui-ellipsis' style="padding: 5px;">安全</p>
				</div>
			</div>
			<ul style="margin: 0px;padding: 0px;">
				<li id="menu_self" data-id="light_chart">
					<div style="padding: 15px;margin: 0px; font-size: 15px;background: #f1ce3e;list-style: none;"><span>光照度</span><span style="float: right;">350lx</span>
					</div>
					<div id="light_chart" style="border-color: #d5d5d5 !important;">
						<div style="color: #595959;border-top-color: #d5d5d5;border-left-color:#d5d5d5;border-right-color:#d5d5d5 ; border-bottom-color:#FFF;background-color:#d5d5d5;" id="segmentedControl" class="mui-segmented-control">
							<a class="mui-control-item mui-active l1" href="#item1">
							天
						</a>
							<a class="mui-control-item l1" href="#item2">
							周
						</a>
							<a class="mui-control-item l1" href="#item3">
							月
						</a>
						</div>
						<div>
							<div id="item1" class="mui-control-content  mui-active">
								<div style="color: #595959;border-color: #FFF !important;background-color: #FFF !important;" id="segmentedControl" class="mui-segmented-control">
									<a class="mui-control-item l2">
									昨天
								</a>
									<a class="mui-control-item l2 mui-active">
									今天
								</a>
								</div>
							</div>
							<div id="item2" class="mui-control-content">
								<div style="color: #595959;border-color: #FFF !important;background-color: #FFF !important;" id="segmentedControl" class="mui-segmented-control">
									<a class="mui-control-item l2">
									上周
								</a>
									<a class="mui-control-item mui-active l2">
									今周
								</a>
								</div>
							</div>
							<div id="item3" class="mui-control-content">
								<div style="color: #595959;border-color: #FFF !important;background-color: #FFF !important;" id="segmentedControl" class="mui-segmented-control">
									<a class="mui-control-item l2">
									上月
								</a>
									<a class="mui-control-item mui-active l2">
									今月
								</a>
								</div>
							</div>
						</div>
						<div class="mui-content-padded" id="chart">
							<div class="chart" id="lineChart"></div>
						</div>
					</div>
				</li>
				<li id='datePicker' data-options='{"type":"date","beginYear":2014,"endYear":2016}' data-id="">
					<div style="padding: 15px;margin-top: 1px; font-size: 15px;background: #a8dd57;list-style: none;">
						<span>空气温度</span><span id="datetime"></span><span style="float: right;">33&#176;C</span>
					</div>
				</li>
				<li id="menu_self" data-id="">
					<div style="padding: 15px;margin-top: 1px; font-size: 15px;background: #a8dd57;list-style: none;">
						<span>空气湿度</span><span style="float: right;">130RH</span>
					</div>
				</li>
				<li id="menu_self" data-id="">
					<div style="padding: 15px;margin-top: 1px; font-size: 15px;background: #d52c29;list-style: none;">
						<span>土壤水分</span><span style="float: right;">70%</span>
					</div>
				</li>
				<li id="menu_self" data-id="">
					<div style="padding: 15px;margin-top: 1px; font-size: 15px;background: #d52c29;list-style: none;">
						<span>没有啦</span><span style="float: right;">70%</span>
					</div>
				</li>
			</ul>
		</div>
	</body>
	<style type="text/css">
		.chart {
			height: 200px;
			margin: 0px;
			padding: 0px;
		}
		
		.mui-segmented-control .l1.mui-active {
			color: #595959;
			font-weight: bolder;
			background-color: #FFF !important;
		}
		
		.mui-segmented-control .l1 {
			color: #595959;
			background-color: #d5d5d5 !important;
			border-left: 1px solid #d5d5d5;
		}
		
		.mui-segmented-control .l2.mui-active {
			color: #595959;
			font-weight: bolder;
			background-color: #FFF !important;
		}
		
		.mui-segmented-control .l2 {
			color: #595959;
			background-color: #FFF !important;
			border-left: 1px solid #FFF
		}
	</style>
	<script>
		document.getElementById("menu_self").addEventListener("tap", function() {
			var paramArray = this.getAttribute('data-id').split(',');
			var arrays = new Array("light_chart");
			/*for (var i = 0; i < arrays.length; i++) {
				document.getElementById(arrays[i]).style.display = "none";
			}
			switch (paramArray[0]) {
				case 'light_chart':
					document.getElementById('light_chart').style.display = "block";
					break;
			}*/
			if (document.getElementById('light_chart').style.display == "block") {
				document.getElementById('light_chart').style.display = "none";
			} else {
				document.getElementById('light_chart').style.display = "block";
			}
		});
		document.getElementById("datePicker").addEventListener("tap", function() {
			var arrays = new Array("light_chart");
			for (var i = 0; i < arrays.length; i++) {
				document.getElementById(arrays[i]).style.display = "none";
			}
		});
		var getOption = function(chartType) {
			var chartOption = chartType == 'pie' ? {} : {
				legend: {
					data: ['平均值(350)', '环境参数']
				},
				grid: {
					x: 35,
					x2: 10,
					y: 30,
					y2: 25
				},
				xAxis: [{
					type: 'category',
					data: ['5/04', '', '5/05', '', '5/06', '', '5/07', '', '5/08', '', '5/09']
				}],
				yAxis: [{
					type: 'value',
					splitArea: {
						show: true
					}
				}],
				series: [{
					name: '环境参数',
					type: chartType,
					data: [240, 200, 270, 320, 390, 330, 280, 300, 280, 450, 350]
				}]
			};
			return chartOption;
		};
		var lineChart = echarts.init(document.getElementById('lineChart'));
		lineChart.setOption(getOption('line'));
		(function($) {
			$.init();
			var datePicker = $('#datePicker');
			datePicker.each(function(i, datePicker) {
				datePicker.addEventListener('tap', function() {
					var optionsJson = this.getAttribute('data-options') || '{}';
					var options = JSON.parse(optionsJson);
					var id = this.getAttribute('id');
					var picker = new $.DtPicker(options);
					picker.show(function(rs) {
						document.getElementById('datetime').innerHTML = '(' + rs.text + ')';
					});
				}, false);
			});
		})(mui);
	</script>

</html>